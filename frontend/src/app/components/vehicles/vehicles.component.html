<div *ngIf="loading">
    <app-loading></app-loading>
</div>

<div *ngIf="!loading">
    <button style="margin-left: 20%; margin-top: 40px;" class="btn btn-success" (click)="open(content, null)">Add Vehicle</button>
    <table class="table table-striped table-bordered table-hover table-sm" style="color: white; width: 50vw; margin-left: 20%; margin-top: 40px;">
        <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">Model</th>
              <th scope="col">Number Plate</th>
              <th scope="col">Driver Email</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let vehicle of vehicles; let vehicleId=index;">
                <td style="color:white">{{vehicle.id_vehicle}}</td>
                <td style="color:white">{{vehicle.model}}</td>
                <td style="color:white">{{vehicle.number_plate}}</td>
                <td><button (click)="open(content, vehicleId)" class="btn btn-sm btn-primary">EDIT</button></td>
            </tr>
        </tbody>
    </table>
    <ng-template #content let-modal>
        <div class="modal-header">
            <h4 *ngIf="!adding_vehicle" class="modal-title" id="modal-basic-title">Vehicle Update</h4>
            <h4 *ngIf="adding_vehicle" class="modal-title" id="modal-basic-title">Add New Vehicle</h4>
            <p *ngIf="callback_info.success" color="green">Vehicle added!</p>
            <p *ngIf="callback_info.error" color="green">There was a problem adding vehicle!</p>
            <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
        </div>
        <div class="modal-body" style="height: 30vh; overflow-y: scroll;">
            <div class="mb-3">
                <label for="model">Model</label>
                <div class="input-group">
                    <input
                        id="model"
                        class="form-control"
                        [(ngModel)]="model"
                    />
                </div>

                <label for="numberPlate">Number Plate</label>
                <div class="input-group">
                    <input
                        id="numberPlate"
                        class="form-control"
                        [(ngModel)]="number_plate"
                    />
                </div>
                <label for="driverEmail">Driver Email</label>
                <div class="input-group">
                    <input
                        id="driverEmail"
                        class="form-control"
                        [(ngModel)]="driver_email"
                    />
                </div>
            </div>

        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-outline-dark" (click)="saveVehicleData()">Save</button>
        </div>
    </ng-template>
</div>
