<div *ngIf="loading">
    <app-loading></app-loading>
</div>

<div *ngIf="!loading">
    <button style="margin-left: 20%; margin-top: 40px;" class="btn btn-success" (click)="open(content, null)">Add Employee</button>
    <table class="table table-striped table-bordered table-hover table-sm" style="color: white; width: 50vw; margin-left: 20%; margin-top: 40px;">
        <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">First</th>
              <th scope="col">Last</th>
              <th scope="col">Email</th>
              <th scope="col">Wage</th>
              <th scope="col">Role</th>
              <th scope="col">Phone Number</th>
              <th *ngIf="user.role == 'admin'" scope="col">SSN</th>
              <th style="width: 1vw;" *ngIf="user.role == 'admin'" scope="col">Edit</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let employee of employees; let employeeId=index;">
                <td style="color:white">{{employee.id_employee}}</td>
                <td style="color:white">{{employee.first_name}}</td>
                <td style="color:white">{{employee.last_name}}</td>
                <td style="color:white">{{employee.email}}</td>
                <td style="color:white">{{employee.wage}}</td>
                <td style="color:white">{{employee.role}}</td>
                <td style="color:white">{{employee.phone_number}}</td>
                <td style="color:white">{{employee.ssn}}</td>
                <td><button (click)="open(content, employeeId)" class="btn btn-sm btn-primary">EDIT</button></td>
            </tr>
        </tbody>
    </table>
    <ng-template #content let-modal>
        <div class="modal-header">
            <h4 *ngIf="!adding_employee" class="modal-title" id="modal-basic-title">Employee Update</h4>
            <h4 *ngIf="adding_employee" class="modal-title" id="modal-basic-title">Add New Employee</h4>
            <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
        </div>
        <div class="modal-body" style="height: 30vh; overflow-y: scroll;">
            <div class="mb-3">
                <label for="firstName">First Name</label>
                <div class="input-group">
                    <input
                        id="firstName"
                        class="form-control"
                        [(ngModel)]="first_name"
                    />
                </div>

                <label for="lastName">Last Name</label>
                <div class="input-group">
                    <input
                        id="lastName"
                        class="form-control"
                        [(ngModel)]="last_name"
                    />
                </div>

                <label for="email">Email</label>
                <div class="input-group">
                    <input
                        id="email"
                        class="form-control"
                        [(ngModel)]="email"
                    />
                </div>

                <label *ngIf="adding_employee" for="password">Password</label>
                <div *ngIf="adding_employee" class="input-group">
                    <input
                        id="password"
                        class="form-control"
                        [(ngModel)]="password"
                    />
                </div>

                <label for="phoneNumber">Phone Number</label>
                <div class="input-group">
                    <input
                        id="phoneNumber"
                        class="form-control"
                        [(ngModel)]="phone_number"
                    />
                </div>

                <label for="city">City</label>
                <div class="input-group">
                    <input
                        id="city"
                        class="form-control"
                        [(ngModel)]="city"
                    />
                </div>

                <label for="county">County</label>
                <div class="input-group">
                    <input
                        id="county"
                        class="form-control"
                        [(ngModel)]="county"
                    />
                </div>

                <label for="zipCode">Zip Code</label>
                <div class="input-group">
                    <input
                        id="zipCode"
                        class="form-control"
                        [(ngModel)]="zip_code"
                    />
                </div>

                <label for="street">Street</label>
                <div class="input-group">
                    <input
                        id="street"
                        class="form-control"
                        [(ngModel)]="street"
                    />
                </div>

                <label for="street">Street Number</label>
                <div class="input-group">
                    <input
                        id="streetNumber"
                        class="form-control"
                        [(ngModel)]="street_number"
                    />
                </div>

                <label for="wage">Wage</label>
                <div class="input-group">
                    <input
                        id="wage"
                        class="form-control"
                        [(ngModel)]="wage"
                    />
                </div>

                <label for="role">Role(admin or driver)</label>
                <div class="input-group">
                    <input
                        id="role"
                        class="form-control"
                        [(ngModel)]="role"
                    />
                </div>

                <label for="ssn">SSN</label>
                <div class="input-group">
                    <input
                        id="ssn"
                        class="form-control"
                        [(ngModel)]="ssn"
                    />
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-outline-dark" (click)="saveEmployeeData()">Save</button>
        </div>
    </ng-template>
</div>
